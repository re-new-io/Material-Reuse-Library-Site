import{D as f}from"./main-BFjwW7uW.js";import{C as h}from"./component-material-card-Cosg3dQB.js";import"./icon-badge-Bk4A7JFt.js";const l=new f,d=document.getElementById("component-material-results"),y=new URLSearchParams(window.location.search),g=y.get("filter");let c=[];async function _(m){try{const n=await l.getBigMainFiltereach(m,["Name","component/materials"]);if(console.log("bigmainfilterLayer: ",n),n){const r=n.get("Name"),o=n.get("component/materials");c=o?.map(e=>e)||[];const a=document.querySelector("main-heading");return a&&(a.heading="Reuse Methodologies",a.breadcrumb=r),o}}catch(n){console.error("Error fetching bigmainfilter layer:",n)}return[]}(async()=>(g&&await _(g),console.log("components: ",c),Promise.all([l.getMaterials(["material/component_name"]),l.searchComponentMaterials(["component_or_material","material/component_name","description_short","Image","shearing_layer","materials","discpline_layer","category","component_type","reuse_options","project_examples_link"])]).then(([m,n])=>{d.innerHTML="";let r=n;if(g&&c.length>0&&(r=n.filter(e=>c.includes(e.id))),r.length===0){const e=document.createElement("div");e.className="col-12 text-center py-5",e.innerHTML="<h4>No components found for the selected criteria.</h4>",d.appendChild(e);return}r.forEach(e=>{const t=new h;t.isComponent=e.get("component_or_material")==="Component",t.componentMaterialId=e.id,t.componentName=e.get("material/component_name"),t.componentDescription=e.get("description_short"),t.imageUrl=e.get("Image")?.at(0)?.url,t.shearingLayer=e.get("shearing_layer"),t.materials=e.get("materials")?.map(i=>m.find(s=>s.id===i)?.get("material/component_name")),t.includeUnapprovedData=l.includeUnapprovedData,d.appendChild(t)});const o=document.getElementById("search-input"),a=document.getElementById("search-button");if(o&&a){console.log("Setting up search functionality for component materials");const e=()=>{const t=o.value.toLowerCase().trim();console.log("Searching for:",t);const i=document.querySelectorAll("component-material-card");let s=0;i.forEach(p=>{const u=p.componentName?.toLowerCase()||"";!t||u.includes(t)?(p.style.display="",s++):p.style.display="none"}),console.log(`Showing ${s} of ${i.length} components`)};o.addEventListener("input",e),a.addEventListener("click",e),o.value.trim()!==""&&e()}else console.warn("Search elements not found")})))();
